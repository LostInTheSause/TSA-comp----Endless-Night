[gd_scene load_steps=87 format=3 uid="uid://damyxouc062qa"]

[ext_resource type="Texture2D" uid="uid://b5biv2xekos3d" path="res://sprites/player animations/Dead_player/1000046817.png" id="2_pxxx8"]
[ext_resource type="Texture2D" uid="uid://ble8it5h5gxu2" path="res://sprites/player animations/Player V3 jump.png" id="2_swya4"]
[ext_resource type="Texture2D" uid="uid://kms33bi03rub" path="res://sprites/player animations/Player V3 idol RIGHT.png" id="2_u4ydx"]
[ext_resource type="Texture2D" uid="uid://dixnobtth3s31" path="res://sprites/player animations/Dead_player/1000046814.png" id="3_gk7be"]
[ext_resource type="Texture2D" uid="uid://qehdsf5jp33q" path="res://sprites/player animations/Player V3 climb2.png" id="4_gd6mk"]
[ext_resource type="Texture2D" uid="uid://bneov6wy7w2tt" path="res://sprites/player animations/Dead_player/1000046815.png" id="4_xigon"]
[ext_resource type="Texture2D" uid="uid://b1m8meaa23w2q" path="res://sprites/player animations/Dead_player/1000046816.png" id="5_da5f2"]
[ext_resource type="Texture2D" uid="uid://cyoar287ccqeq" path="res://sprites/player animations/Player V3 walk.png" id="5_gd6mk"]
[ext_resource type="Texture2D" uid="uid://cumjs5daqfkid" path="res://sprites/player animations/dust1 (1).png" id="5_swya4"]
[ext_resource type="Texture2D" uid="uid://c43bsh1ltm6g3" path="res://sprites/player animations/player fall.png" id="6_gk7be"]
[ext_resource type="Texture2D" uid="uid://c8e4k72cacluu" path="res://sprites/background sprites/New Piskel (7).png" id="6_u4ydx"]
[ext_resource type="PackedScene" uid="uid://biy3uke8cc1mg" path="res://scenes/ghost_player.tscn" id="12_xigon"]
[ext_resource type="PackedScene" uid="uid://c7ypfsxpl7hnx" path="res://scenes/ghost_rope_segment.tscn" id="13_da5f2"]

[sub_resource type="GDScript" id="GDScript_6a63v"]
script/source = "extends CharacterBody2D
@onready var animated_sprite_2d: AnimatedSprite2D = $AnimatedSprite2D


@onready var animation_player: AnimationPlayer = $AnimationPlayer


@onready var dust: AnimatedSprite2D = $dust
@onready var ghost_player: CharacterBody2D = $ghost_player

@onready var ghost_rope_segment: Node2D = $ghost_rope_segment

@onready var dash_timer: Timer = $\"dash timer\"
@onready var ghost_timer: Timer = $ghost_timer

@onready var if_on_floor_ray: RayCast2D = $if_on_floor_ray
@onready var if_wall_ray: RayCast2D = $\"if wall_ray\"

@onready var collision_shape_2d_2: CollisionShape2D = $CollisionShape2D2

@onready var gpu_particles_2d: CPUParticles2D = $GPUParticles2D

@onready var vine_detection: Area2D = $vine_detection

@export var can_dash = true
@onready var camera: Camera2D = $Camera

var moving = false

var horizontal_movment = 0

var SPEED = 0
const run_speed = 220
@export var walk_SPEED = 100



const dash_amt := 750
const dash_time := 0.15

var is_dashing = false
var dash_available = true
var dash_dir: Vector2 = Vector2.RIGHT
var dashen_time:float = 0.15 
@export var ghost_scene: PackedScene

var Jump_velo = -400.0
var jumping:bool = false
const JUMP_VELOCITY = -400.0
const RUNNING_JUMP = -450
var prev_y = 0

var is_hanging = false
var hanging_direction = 0

var jump_buffer = false
@export var jump_buffer_timer = 0.4

@export var coyote_time = 0.3
var jump_availabel = true

var running = false

const Mushroom_jump_amt: float = 600.0

#varables for the players death

var dead = false
var max_hearts = 5
var cur_hearts = 5
var respawn_point = 0


var time_falling = 0
var time_needed_for_dust = 1.0
var show_dust = false

var is_talking = false

var on_rope = false

var hit_berry = false

var playerz_index = self.z_index

var is_floating = false
var is_ghost = false
var emit_particles = true
var falling = false

var camera_zoom_out = false
var add_camera = false
func _ready() -> void:
	respawn_point = self.global_position
	
	
	prev_y = self.position.y
	self.add_to_group(\"Player\")
	



func _physics_process(delta: float) -> void:
	
	if !emit_particles:
		gpu_particles_2d.texture = null
		gpu_particles_2d.scale_amount_max = 3.0
	
	if is_ghost:
		if !ghost_player.get(\"show_ghost\"):
			ghost_player.position = Vector2.ZERO
			ghost_rope_segment.visible = false
			if Input.is_action_just_pressed(\"dash\"):
				ghost_player.show_ghost = true
				is_floating = true
				camera_zoom_out = true
		else:
			ghost_rope_segment.visible = true
			ghost_rope_segment.set_start(ghost_player.position)
			ghost_rope_segment.set_last(Vector2.ZERO)
						
		if camera_zoom_out:
			camera.zoom -= Vector2(0.05,0.05)
			if camera.zoom.x < 2.5:
				camera_zoom_out = false
		elif !camera_zoom_out and !is_floating and camera.zoom.x <= 4.0:
			camera.zoom += Vector2(0.1,0.1)
				
		if ghost_player.get(\"float_end\") and is_floating:
			ghost_rope_segment.visible = false
			position = ghost_player.global_position
			ghost_player.position = Vector2.ZERO
			is_floating = false
		
	

		
	var direction := Input.get_axis(\"left\", \"right\")
	
	if is_talking || is_floating:
		if !is_ghost:
			animated_sprite_2d.play(\"idle\")
			velocity += get_gravity() * delta
		elif is_ghost:
			animated_sprite_2d.play(\"dead_idle\")
			velocity += get_gravity() * delta
		
		move_and_slide()
		velocity = Vector2.ZERO
		return
	
	
	if direction >  0:
		if_wall_ray.target_position.x = 11
		hanging_direction = 1
	elif direction < 0:
		if_wall_ray.target_position.x = -11
		hanging_direction = -1
	
	
		
	
	if !if_on_floor_ray.is_colliding() and if_wall_ray.is_colliding() and !dead:
		is_hanging = true
		
		if !is_ghost:
			animated_sprite_2d.play(\"ledge hang\")
		elif is_ghost:
			animated_sprite_2d.play(\"dead_ledge_hang\")
		time_falling = 0
		if Input.is_action_just_pressed(\"jump\"):
			jump()
			velocity.x = -(200 * hanging_direction)
			if !is_ghost:
				animated_sprite_2d.play(\"jumping(temp)\")
			elif is_ghost:
				animated_sprite_2d.play(\"dead_jump\")
	else:
		is_hanging = false
		collision_shape_2d_2.disabled = false
	
	
#handles what happends if the charecter is running
	if Input.is_action_pressed(\"run\"):
		#if current_stamina > min_stamina:
	
		SPEED = run_speed
		running = true
		Jump_velo = RUNNING_JUMP
		
	else:
		#if current_stamina <= min_stamina:
		SPEED = walk_SPEED
		running = false
		Jump_velo = JUMP_VELOCITY
	
	
	
		
	if !jumping:
		time_needed_for_dust = 0.5
	
	if !is_on_floor():
		time_falling += 1 * delta
		if time_falling >= time_needed_for_dust:
			show_dust = true

	if jumping and if_on_floor_ray.is_colliding() and show_dust:
		dust.play(\"default\")
		show_dust = false
		time_falling = 0.0
		animation_player.play(\"fall\")
	
	#handles coyote time
	if not is_on_floor(): 
		
		if jump_availabel:
			get_tree().create_timer(coyote_time).timeout.connect(coyote_timeout)
			
		if !is_dashing and not on_rope:
		
			velocity += get_gravity() * delta
		
	else:
		jump_availabel = true
		jumping = false
		dash_available = true
		time_falling = 0
	# Handle jump.
	if Input.is_action_just_pressed(\"jump\"):
		if (is_on_floor() or jump_availabel) and !ghost_player.get(\"show_ghost\"): 
			jump()
		
	elif Input.is_action_just_pressed(\"jump\"):
		#handles jump buffering so if the player inputs a jump to early to re_jump they can still jump making it feel better to play
		jump_buffer = true
		get_tree().create_timer(jump_buffer_timer).timeout.connect(_on_jump_buufer_of_doom_timeout)
		if jump_availabel and jump_buffer:
			jump()
	# Get the input direction and handle the movement/deceleration.
	# As good practice, you should replace UI actions with custom gameplay actions.
	if falling:
		animated_sprite_2d.play(\"falling\")
		move_and_slide()
		return
	
	if !is_hanging:
		#flips the sprite to face the direction it is moving
		if direction < 0:
			animated_sprite_2d.flip_h = true
		elif direction > 0:
			animated_sprite_2d.flip_h = false
	
	if is_on_floor():
		if !is_dashing and !dash_available:
			dash_available = true
	if not is_ghost:
		dash_logic(delta)

	
		
	
	
	if direction:
		if not is_hanging:
			if not dead :
				if not is_dashing:
					moving = true
					if running:
						velocity.x = direction * SPEED
						animated_sprite_2d.play(\"runniing\")
					else:
						velocity.x = direction * SPEED
						if !is_ghost:
							animated_sprite_2d.play(\"walking\")
						elif is_ghost:
							animated_sprite_2d.play(\"dead_walk\")
				else:
					pass
	else:
		
		if not is_hanging:
			if !jumping:
				moving = false
				if !is_ghost:
					animated_sprite_2d.play(\"idle\")
				elif is_ghost:
					animated_sprite_2d.play(\"dead_idle\")
			velocity.x = move_toward(velocity.x, 0, SPEED)
		
	if is_dashing and ghost_timer.is_stopped():
		
		ghost_timer.start() # Reset the timer
	
	

	move_and_slide()
	
	

func when_player_leave_screen() -> void:
	pass
	#if not self.position.y > camera_2d.limit_bottom:
	#	camera_2d.position = self.position
	

func coyote_timeout():
	jump_availabel = false

func jump() -> void:
	jumping = true
	velocity.y = Jump_velo
	if !is_ghost:
		animated_sprite_2d.play(\"jumping(temp)\")
	elif is_ghost:
		animated_sprite_2d.play(\"dead_jump\")
	time_needed_for_dust = 1
	jump_availabel = false
	cur_hearts -= 1
	

func _on_jump_buufer_of_doom_timeout() -> void:
	jump_buffer = false
	


func _on_checkpoint_body_entered(_checkpoint_position) :
	if not dead:
		respawn_point = self.global_position
		print(respawn_point)
		
		
func _on_death(_thingy) -> void:
	print(\"you ded\")
	velocity = Vector2.ZERO
	set_collision_mask_value(1, false) # Example: disable collision with layer 1
	self.z_index = -1
	
	if not dead:
		velocity.y = -300
	dead = true
	await get_tree().create_timer(1.0).timeout
	if dead:
		respawn()
		
	
	
func respawn() -> void:
	
	#respawn_point.y += 20
	self.position = respawn_point
	self.z_index = playerz_index
	dead = false
	if !is_ghost:
		animated_sprite_2d.play(\"idle\")
	elif is_ghost:
		animated_sprite_2d.play(\"dead_idle\")
	set_collision_mask_value(1, true) # Re-enable collision
	#camera_2d.position = self.position



func dash_logic(delta: float) -> void:
	var input_dir: Vector2 = Vector2(
		Input.get_axis(\"left\", \"right\"),
		Input.get_axis(\"jump\",\"ui_text_backspace_all_to_left.macos\")
	)
	
	if input_dir.x != 0:
		dash_dir.x = input_dir.x
	
	if ((dash_available and Input.is_action_just_pressed(\"dash\") and can_dash and !is_hanging) or hit_berry) and !dead:
		var final_dash_dir: Vector2 = input_dir
		
		if  input_dir.x == 0:
			final_dash_dir.x = dash_dir.x
		
		final_dash_dir.y =  input_dir.y
		
		dash_available =false
		is_dashing = true
		
		
		
		
		create_ghost(dash_dir.x)
		velocity.x = final_dash_dir.x * dash_amt/1.2
		velocity.y = final_dash_dir.y * dash_amt/1.5 *0
	elif is_hanging and Input.is_action_just_pressed(\"dash\"):
		is_hanging = false
		collision_shape_2d_2.disabled = true
		
		
	
		
	
	if is_dashing:
		
		dashen_time -= delta
		if dashen_time <= 0.0:
			is_dashing = false
			hit_berry = false
			dashen_time = dash_time


	
func create_ghost(direction) -> void:
	if !dash_available:
		if ghost_scene:
			var new_ghost = ghost_scene.instantiate()
			get_parent().add_child(new_ghost)
			new_ghost.global_position = global_position
			if direction < 0:
				new_ghost.get_child(0).flip_h = true
			elif direction > 0:
				new_ghost.get_child(0).flip_h = false
			new_ghost.set_properties(
				#animated_sprite_2d.frame,    # The current animation frame
				animated_sprite_2d.scale,
				Color(\"ffffffbe\"),
				false
				 # Set to true if you want the ghost behind the player
			)
			
			
	
"

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_u4ydx"]
radius = 7.999998
height = 42.0

[sub_resource type="Animation" id="Animation_swya4"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(2.035, 2.035)]
}

[sub_resource type="Animation" id="Animation_beeat"]
resource_name = "idle"
length = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.06666667, 0.14, 0.2),
"transitions": PackedFloat32Array(1, 1.0352651, 1.4640855, 1),
"update": 0,
"values": [Vector2(2.035, 2.035), Vector2(2.35, 2.416), Vector2(2.042, 1.72), Vector2(2.035, 2.035)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_53pyr"]
_data = {
&"RESET": SubResource("Animation_swya4"),
&"fall": SubResource("Animation_beeat")
}

[sub_resource type="AtlasTexture" id="AtlasTexture_lo1kp"]
atlas = ExtResource("4_gd6mk")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_nxiwv"]
atlas = ExtResource("4_gd6mk")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_051px"]
atlas = ExtResource("4_gd6mk")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_xhhqg"]
atlas = ExtResource("4_gd6mk")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_cp0a7"]
atlas = ExtResource("4_gd6mk")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_tdgqx"]
atlas = ExtResource("4_gd6mk")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_y6dtl"]
atlas = ExtResource("4_gd6mk")
region = Rect2(0, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ej33s"]
atlas = ExtResource("4_gd6mk")
region = Rect2(32, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jdehg"]
atlas = ExtResource("2_pxxx8")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_d0m1d"]
atlas = ExtResource("2_pxxx8")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_60pi4"]
atlas = ExtResource("3_gk7be")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_bd2bi"]
atlas = ExtResource("3_gk7be")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_u4k4v"]
atlas = ExtResource("3_gk7be")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ujvkf"]
atlas = ExtResource("3_gk7be")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_udr0v"]
atlas = ExtResource("3_gk7be")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_5kfdk"]
atlas = ExtResource("3_gk7be")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_svj8m"]
atlas = ExtResource("3_gk7be")
region = Rect2(0, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_k4l3e"]
atlas = ExtResource("4_xigon")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_71cjy"]
atlas = ExtResource("5_da5f2")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_md37a"]
atlas = ExtResource("5_da5f2")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_c78ep"]
atlas = ExtResource("5_da5f2")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_th21s"]
atlas = ExtResource("5_da5f2")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_bqhta"]
atlas = ExtResource("5_da5f2")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_gibii"]
atlas = ExtResource("5_da5f2")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_pwksa"]
atlas = ExtResource("5_da5f2")
region = Rect2(0, 64, 32, 32)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_yxn1k"]
load_path = "res://.godot/imported/idle (1).png-fb9abd4c852c48fe55a82d8c5caa53dc.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_6a63v"]
atlas = SubResource("CompressedTexture2D_yxn1k")
region = Rect2(0, 0, 80, 80)

[sub_resource type="AtlasTexture" id="AtlasTexture_5ejhy"]
atlas = SubResource("CompressedTexture2D_yxn1k")
region = Rect2(0, 80, 80, 80)

[sub_resource type="AtlasTexture" id="AtlasTexture_41qoe"]
atlas = SubResource("CompressedTexture2D_yxn1k")
region = Rect2(80, 0, 80, 80)

[sub_resource type="AtlasTexture" id="AtlasTexture_r14gh"]
atlas = SubResource("CompressedTexture2D_yxn1k")
region = Rect2(160, 0, 80, 80)

[sub_resource type="AtlasTexture" id="AtlasTexture_wpydh"]
atlas = ExtResource("6_gk7be")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_yuux7"]
atlas = ExtResource("6_gk7be")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jjhxy"]
atlas = ExtResource("6_gk7be")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_dis1m"]
atlas = ExtResource("6_gk7be")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_pxxx8"]
atlas = ExtResource("2_u4ydx")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_gk7be"]
atlas = ExtResource("2_u4ydx")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_q2svl"]
atlas = ExtResource("2_swya4")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_pxodq"]
atlas = ExtResource("2_swya4")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ad1md"]
atlas = ExtResource("2_swya4")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_nioxj"]
atlas = ExtResource("2_swya4")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ks3px"]
atlas = ExtResource("2_swya4")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_35jvu"]
atlas = ExtResource("2_swya4")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ghr2u"]
atlas = ExtResource("2_swya4")
region = Rect2(0, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_px3b6"]
atlas = ExtResource("4_gd6mk")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_vy1vx"]
atlas = ExtResource("4_gd6mk")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_yxn1k"]
atlas = ExtResource("5_gd6mk")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_swya4"]
atlas = ExtResource("5_gd6mk")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_u4ydx"]
atlas = ExtResource("5_gd6mk")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_gd6mk"]
atlas = ExtResource("5_gd6mk")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_5dx4j"]
atlas = ExtResource("5_gd6mk")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_eh4q1"]
atlas = ExtResource("5_gd6mk")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_gbc7u"]
atlas = ExtResource("5_gd6mk")
region = Rect2(0, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_xigon"]
atlas = ExtResource("5_gd6mk")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_da5f2"]
atlas = ExtResource("5_gd6mk")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_8vmpl"]
atlas = ExtResource("5_gd6mk")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_8xa5l"]
atlas = ExtResource("5_gd6mk")
region = Rect2(0, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_2wf5j"]
atlas = ExtResource("5_gd6mk")
region = Rect2(32, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_naq25"]
atlas = ExtResource("5_gd6mk")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_24p44"]
atlas = ExtResource("5_gd6mk")
region = Rect2(0, 64, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_41qoe"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_lo1kp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nxiwv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_051px")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xhhqg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cp0a7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tdgqx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y6dtl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ej33s")
}],
"loop": true,
"name": &"climbing",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_jdehg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d0m1d")
}],
"loop": true,
"name": &"dead_idle",
"speed": 4.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_60pi4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bd2bi")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u4k4v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ujvkf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_udr0v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5kfdk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_svj8m")
}],
"loop": true,
"name": &"dead_jump",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_k4l3e")
}],
"loop": true,
"name": &"dead_ledge_hang",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_71cjy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_md37a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c78ep")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_th21s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bqhta")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gibii")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pwksa")
}],
"loop": true,
"name": &"dead_walk",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_6a63v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5ejhy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_41qoe")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r14gh")
}],
"loop": true,
"name": &"death",
"speed": 4.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_wpydh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yuux7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jjhxy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dis1m")
}],
"loop": true,
"name": &"falling",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_pxxx8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gk7be")
}],
"loop": true,
"name": &"idle",
"speed": 4.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_q2svl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pxodq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ad1md")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nioxj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ks3px")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_35jvu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ghr2u")
}],
"loop": true,
"name": &"jumping(temp)",
"speed": 9.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_px3b6")
}],
"loop": true,
"name": &"ledge hang",
"speed": 1.0
}, {
"frames": [],
"loop": true,
"name": &"new_animation",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_vy1vx")
}],
"loop": true,
"name": &"on_vine",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_yxn1k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_swya4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u4ydx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gd6mk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5dx4j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_eh4q1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gbc7u")
}],
"loop": true,
"name": &"runniing",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xigon")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_da5f2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8vmpl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8xa5l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2wf5j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_naq25")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_24p44")
}],
"loop": true,
"name": &"walking",
"speed": 6.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yxn1k"]
size = Vector2(22, 0)

[sub_resource type="AtlasTexture" id="AtlasTexture_vioxa"]
atlas = ExtResource("5_swya4")
region = Rect2(0, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_3ga58"]
atlas = ExtResource("5_swya4")
region = Rect2(16, 0, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_sn3o6"]
atlas = ExtResource("5_swya4")
region = Rect2(0, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_la45q"]
atlas = ExtResource("5_swya4")
region = Rect2(16, 16, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_pcb8e"]
atlas = ExtResource("5_swya4")
region = Rect2(0, 0, 32, 8)

[sub_resource type="SpriteFrames" id="SpriteFrames_vy1vx"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_vioxa")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3ga58")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sn3o6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_la45q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pcb8e")
}],
"loop": false,
"name": &"default",
"speed": 9.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_u4ydx"]
size = Vector2(42, 61)

[node name="Lil guy" type="CharacterBody2D"]
top_level = true
z_index = 130
wall_min_slide_angle = 1.5097098
safe_margin = 0.955
script = SubResource("GDScript_6a63v")
walk_SPEED = 125
jump_buffer_timer = 0.57
coyote_time = 0.235

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(1.0000019, 7)
shape = SubResource("CapsuleShape2D_u4ydx")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_53pyr")
}

[node name="move cam when player leave" type="VisibleOnScreenNotifier2D" parent="."]
position = Vector2(-4.9999995, 9.999999)
scale = Vector2(0.99999994, 0.99999994)
rect = Rect2(1.08, -11.999999, 8.92, 19.829998)

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
unique_name_in_owner = true
modulate = Color(0.74509805, 0.74509805, 0.74509805, 1)
texture_filter = 1
scale = Vector2(2.035, 2.035)
sprite_frames = SubResource("SpriteFrames_41qoe")
animation = &"falling"
frame_progress = 0.92523617

[node name="dash timer" type="Timer" parent="."]
wait_time = 0.25
one_shot = true
ignore_time_scale = true

[node name="ghost_timer" type="Timer" parent="."]
wait_time = 0.1
one_shot = true
autostart = true

[node name="CollisionShape2D2" type="CollisionShape2D" parent="."]
position = Vector2(0, -12)
shape = SubResource("RectangleShape2D_yxn1k")

[node name="if_on_floor_ray" type="RayCast2D" parent="."]
target_position = Vector2(0, 31)
hit_from_inside = true

[node name="if wall_ray" type="RayCast2D" parent="."]
position = Vector2(1, -7)
target_position = Vector2(11, 0)
hit_from_inside = true

[node name="dust" type="AnimatedSprite2D" parent="."]
visible = false
z_index = -1
texture_filter = 1
position = Vector2(0, 19)
scale = Vector2(1.86, 1.36)
sprite_frames = SubResource("SpriteFrames_vy1vx")
autoplay = "default"
frame = 4
frame_progress = 1.0

[node name="GPUParticles2D" type="CPUParticles2D" parent="."]
texture_filter = 1
position = Vector2(5, -119)
amount = 15
texture = ExtResource("6_u4ydx")
lifetime = 3.0
speed_scale = 0.5
randomness = 1.0
draw_order = 1
emission_shape = 3
emission_rect_extents = Vector2(200, 20)
direction = Vector2(4.53, 3.23)
gravity = Vector2(-247.946, 375.705)
angular_velocity_max = 383.18
angle_min = -222.7
angle_max = 178.2
scale_amount_min = 0.0
color = Color(0.6378432, 0.6378432, 0.63784313, 1)

[node name="vine_detection" type="Area2D" parent="."]
monitoring = false
gravity = 20.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="vine_detection"]
shape = SubResource("RectangleShape2D_u4ydx")
disabled = true

[node name="ghost_player" parent="." instance=ExtResource("12_xigon")]
visible = false
position = Vector2(-5.0000076, 1)
scale = Vector2(2.035, 2.035)

[node name="ghost_rope_segment" parent="." instance=ExtResource("13_da5f2")]
visible = false
z_index = -1
position = Vector2(1, 4)

[connection signal="screen_exited" from="move cam when player leave" to="." method="when_player_leave_screen"]
[connection signal="timeout" from="dash timer" to="." method="_on_dash_timer_timeout"]
